csvm,1,17,,,,,,,
noop,,,,,,,,,"# cpu layout: A4:E4 = unpacked pointer to blit destination, F4 is packed reference"
copy,*R[0]C4:R[0]C8,*cpu!A4:E4,display,column,row,8,8,,# A2 is the current sprite index
define,outer,*R[2]C1,# eventually this will be a call,,,,,,# B2 is the scratch register
define,inner,*R[3]C1,# loop restart,,,,,,
clear,*display!A2:BL65,,# clear the display,,,,,,
copy,1,*cpu!A2,# initialize the sprite position pointer,,,,,,
call,*A17,,# call draw(),,,,,,
add,*cpu!A2,1,# increment the sprite index,,,,,,
gt,7,*cpu!A2,*inner,,,,,,
sleep,,,,,,,,,
copy,1,*display!D1,# update the screen,,,,,,
jump,*outer,,,,,,,,
,,,,,,,,,
,,,,,,,,,
# draw(),,,,,,,,,
copy,*clock,*cpu!B2,,,,,,,
mult,*cpu!B2,0.0013,,,,,,,
add,*cpu!B2,*cpu!A2,,,,,,,
sin,*cpu!B2,,,,,,,,
mult,*cpu!B2,24,,,,,,,
add,*cpu!B2,29,,,,,,,
floor,*cpu!B2,,,,,,,,
copy,*cpu!B2,*cpu!B4,,,,,,,
copy,*clock,*cpu!B2,,,,,,,
mult,*cpu!B2,0.0018,,,,,,,
add,*cpu!B2,*cpu!A2,,,,,,,
cos,*cpu!B2,,,,,,,,
mult,*cpu!B2,24,,,,,,,
add,*cpu!B2,29,,,,,,,
floor,*cpu!B2,,,,,,,,
copy,*cpu!B2,*cpu!C4,,,,,,,
address,*cpu!A4:E4,*cpu!F4,# create the display sheet destination pointer,,,,,,
copy,*A38:H45,&cpu!F4,# blit the sprite,,,,,,
return,,,,,,,,,
,,,,,,,,,
# sprite data,,,,,,,,,
,3,3,3,3,3,3,,,
3,3,,3,3,,3,3,,
3,3,2,3,3,2,3,3,,
3,3,3,3,3,3,3,3,,
3,,3,3,3,3,,3,,
3,,,,,,,3,,
3,3,1,1,1,1,3,3,,
,3,3,3,3,3,3,,,
